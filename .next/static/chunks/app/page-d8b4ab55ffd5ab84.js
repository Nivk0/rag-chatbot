(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5858:(e,t,a)=>{Promise.resolve().then(a.bind(a,5471))},5471:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var l=a(5155),r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:a,strokeWidth:i?24*Number(s)/Number(l):s,className:n("lucide",c),...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=((e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...c}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),o),...c})});return a.displayName="".concat(e),a})("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),d=()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(!1),[i,d]=(0,r.useState)(null),u=(0,r.useRef)(null),[h,m]=(0,r.useState)(""),x=async e=>{let t=e.target.files;if(t){o(!0);try{let e=new FormData;Array.from(t).forEach(t=>e.append("files",t));let a=await fetch("http://localhost:8000/documents/upload",{method:"POST",body:e}),l=await a.json();s(e=>[...e,...l]),!i&&l.length>0&&d(l[0].id)}catch(e){console.error("Upload failed:",e)}finally{o(!1)}}},p=async e=>{if(e.preventDefault(),!h.trim()||!i)return;let a={role:"user",content:h,documentId:i};t(e=>[...e,a]),o(!0);try{let e=await fetch("http://localhost:8000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:h,document_ids:[i]})}),a=await e.json();t(e=>[...e,{role:"assistant",content:a.response,documentId:i}])}catch(e){console.error("Chat failed:",e)}finally{o(!1),m("")}},f=e.filter(e=>e.documentId===i);return(0,l.jsxs)("div",{className:"flex flex-col h-screen max-w-4xl mx-auto p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Document Chat"}),(0,l.jsxs)("button",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:[(0,l.jsx)(c,{size:20}),"Upload Documents"]}),(0,l.jsx)("input",{type:"file",ref:u,onChange:x,className:"hidden",multiple:!0})]}),a.length>0&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Documents"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(e=>(0,l.jsx)("button",{onClick:()=>d(e.id),className:"p-2 rounded flex items-center gap-2 ".concat(i===e.id?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"),children:(0,l.jsx)("span",{children:e.name})},e.id))})]}),(0,l.jsxs)("div",{className:"flex-1 bg-gray-50 rounded-lg p-4 mb-4 overflow-auto",children:[i?f.map((e,t)=>(0,l.jsx)("div",{className:"mb-4 ".concat("user"===e.role?"text-right":"text-left"),children:(0,l.jsx)("div",{className:"inline-block p-3 rounded-lg ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:e.content})},t)):(0,l.jsx)("div",{className:"text-center text-gray-500",children:"Select a document to start chatting"}),n&&(0,l.jsx)("div",{className:"text-center text-gray-500",children:"Processing..."})]}),(0,l.jsxs)("form",{onSubmit:p,className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:i?"Ask a question about this document...":"Select a document first",className:"flex-1 p-2 border rounded",disabled:!i}),(0,l.jsx)("button",{type:"submit",disabled:n||!i,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400",children:"Send"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(5858)),_N_E=e.O()}]);